<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>浮云计算</title>
    <description>Lirian Su&#39;s Blog</description>
    <link>http://www.cloudisdream.com/</link>
    <atom:link href="http://www.cloudisdream.com/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Wed, 23 Sep 2015 23:10:48 +0800</pubDate>
    <lastBuildDate>Wed, 23 Sep 2015 23:10:48 +0800</lastBuildDate>
    <generator>Jekyll v2.5.3</generator>
    
      <item>
        <title>为什么我要写博客</title>
        <description>&lt;p&gt;我其实很喜欢看别人写的东西，&lt;a href=&quot;http://coolshell.cn/articles/4758.html&quot;&gt;技术类的&lt;/a&gt;、&lt;a href=&quot;http://joshworth.com/dev/pixelspace/pixelspace_solarsystem.html&quot;&gt;非技术类的&lt;/a&gt;，&lt;a href=&quot;http://blog.csdn.net/redguardtoo/article/details/7222501&quot;&gt;中文的&lt;/a&gt;、&lt;a href=&quot;http://blog.codinghorror.com/show-dont-tell/&quot;&gt;英文的&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;很多人写文章的时候总喜欢说一句&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;我先抛砖引玉&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;但是往往&lt;a href=&quot;http://coolshell.cn/articles/11312.html&quot;&gt;他们写的都非常好&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;这样的文章看的我特手痒，想也写博客，但是问题就来了&lt;/p&gt;

&lt;!--MORE--&gt;

&lt;h2 id=&quot;section&quot;&gt;博客的主题是什么？&lt;/h2&gt;

&lt;p&gt;我一直有着写点什么的习惯，以前总是休闲散文写的比较多，更多是偏向于一种日记类的文章。&lt;br /&gt;
自从看了&lt;a href=&quot;http://coolshell.cn/haoel&quot;&gt;陈皓&lt;/a&gt;和&lt;a href=&quot;http://blog.codinghorror.com/about-me/&quot;&gt;Jeff Atwood&lt;/a&gt;的技术类博客以后，总有种写&lt;em&gt;好的&lt;/em&gt;技术博客的冲动。&lt;br /&gt;
因为我对逻辑、语言、思考都感兴趣，而我又不能准确描述我这些兴趣，那我就把它们都写出来好了。&lt;/p&gt;

&lt;p&gt;XKCD的自我描述是&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;A webcomic of romance, sarcasm, math and language&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;http://imgs.xkcd.com/comics/standards.png&quot; alt=&quot;XKCD-927&quot; /&gt;&lt;/p&gt;

&lt;p&gt;希望我也能写出这种主题鲜明，又有趣又妙不可言的文章&lt;/p&gt;

&lt;h2 id=&quot;section-1&quot;&gt;我有什么能写出来的?&lt;/h2&gt;
&lt;p&gt;作为一个菜鸟，我最熟练的VIM水平其实放在网络上也只是一般&lt;br /&gt;
同时根据&lt;code&gt;三人行必有我师焉&lt;/code&gt;，也意味着来到这个博客的人中每三个里就有一个比我厉害&lt;/p&gt;

&lt;p&gt;（我是不是应该放一个博客访问计数器？然后每到三个倍数就alert(“Congratulations”)一下…&lt;/p&gt;

&lt;p&gt;不过既然大家都比我懂的多，那我也就不怕献丑了。&lt;br /&gt;
好玩的，要费脑子的问题，或者对人生的杂念都会被我写下来。&lt;/p&gt;

&lt;h2 id=&quot;section-2&quot;&gt;中文博客还是英文博客？&lt;/h2&gt;
&lt;p&gt;讲道理的话，这个问题我想了很久。&lt;br /&gt;
以至于我都快走火入魔了，同样的文章写了&lt;a href=&quot;/vagrant-up-but-mount-no-device-zh&quot;&gt;一份中文的&lt;/a&gt;和&lt;a href=&quot;/vagrant-up-but-mount-no-device-en&quot;&gt;一份英文的&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;后来想了想，主要基于几个观点：&lt;br /&gt;
1. 母语是中文，所以中文写的会比英文写的更顺畅&lt;br /&gt;
2. 语言的选择决定了受众的范围，而外国受众大部分不了解中国的亚文化&lt;br /&gt;
3. 个人而言，以后认识的国内朋友可能会更多，这本身是一个不错的名片&lt;/p&gt;

&lt;p&gt;于是，我便踏上了博客之路。&lt;/p&gt;

&lt;p&gt;现阶段目标是每周一篇吧，就像&lt;a href=&quot;http://discourse.codinghorror.com/t/how-to-achieve-ultimate-blog-success-in-one-easy-step/445/27&quot;&gt;Jeff说的一样&lt;/a&gt;：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Pick whatever schedule works for you. And be realistic. I think starting with one post a month, like Catto, is a fine goal. Try to slowly ramp it up a bit over time as you get into the groove, and you’re on your way.&lt;/p&gt;
&lt;/blockquote&gt;

</description>
        <pubDate>Wed, 23 Sep 2015 00:00:00 +0800</pubDate>
        <link>http://www.cloudisdream.com/why-im-blogging</link>
        <guid isPermaLink="true">http://www.cloudisdream.com/why-im-blogging</guid>
        
        
      </item>
    
      <item>
        <title>如何优雅地使用Perl的常量模块</title>
        <description>&lt;p&gt;最近的Perl Coding遇到了一个问题：需要对一系列常量进行合法性检测。&lt;/p&gt;

&lt;p&gt;在Research&amp;amp;Develop后，有一些心得。&lt;/p&gt;

&lt;p&gt;本文从Perl的常量定义上，给出一个_自认为_优雅的解决方案。&lt;/p&gt;

&lt;!--MORE--&gt;

&lt;h2 id=&quot;perl&quot;&gt;Perl中一般的常量定义&lt;/h2&gt;

&lt;p&gt;在写项目的时候为了避免Magic Number的情况，我们经常需要定义常量。&lt;/p&gt;

&lt;p&gt;当然了，根据&lt;a href=&quot;http://coolshell.cn/articles/4758.html&quot;&gt;如何写出无法维护的代码&lt;/a&gt;的指导我们不应当定义常量，Number越Magic越好。&lt;/p&gt;

&lt;p&gt;一般来说，Perl中的常量如下：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-perl&quot;&gt;    use constant CONST_PI =&amp;gt; 3.1416;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;在模块化的编码过程中，随着常量的增多，我们会需要把这些常量放到一个常量模块(Perl Module)里面：&lt;/p&gt;

&lt;p&gt;这样的做法也符合DRY(Don’t Repeat Yourself)的原则。#DRYBestPractice?&lt;/p&gt;

&lt;p&gt;比如说在哼哧哼哧地写了一阵子以后，我们有下面这个常量模块。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-perl&quot;&gt;    package Lirian::Constants;
    use strict;
    use warnings;

    #Math Const
    use constant CONST_PI =&amp;gt; 3.1416;
    use constant CONST_E  =&amp;gt; 2.718;

    #Default Config Parm Name
    use constant PARM_DB_NAME  =&amp;gt; &#39;dbName&#39;;
    use constant PARM_DB_HOST  =&amp;gt; &#39;dbHost&#39;;
    use constant PARM_GIT_USER =&amp;gt; &#39;gitUser&#39;;

    require Exporter;
    our @ISA = qw(Exporter);

    our @EXPORT_OK = qw(
        CONST_PI
        CONST_E
        PARM_DB_NAME
        PARM_DB_HOST
        PARM_GIT_USER
    );

    our %EXPORT_TAGS = (
        all  =&amp;gt; \@EXPORT_OK,
        math =&amp;gt; [qw(
            CONST_PI
            CONST_E
        )],
        parm =&amp;gt; [qw(
            PARM_DB_NAME
            PARM_DB_HOST
            PARM_GIT_USER
        )],
    );
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;上面这段代码简单粗暴地展示了Perl中的常量模块。&lt;/p&gt;

&lt;p&gt;其中的&lt;code&gt;our @ISA = qw(Exporter);&lt;/code&gt;是表示本模块继承了&lt;a href=&quot;http://perldoc.perl.org/Exporter.html&quot;&gt;Exporter&lt;/a&gt;这个模块。&lt;/p&gt;

&lt;p&gt;通过这样的定义，我们便有了一个常量的“中心仓库”了。&lt;/p&gt;

&lt;p&gt;至于怎么使用，我们就来看下一节。&lt;/p&gt;

&lt;h2 id=&quot;section&quot;&gt;使用常量模块&lt;/h2&gt;

&lt;p&gt;在上一节中，通过对Exporter的继承，我们有了一个Lirian::Constants模块。&lt;/p&gt;

&lt;p&gt;而一般地，我们会这么使用：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-perl&quot;&gt;    package Lirian::Math;

    use Lirian::Constants qw(:all);
    use strict;
    use warnings;

    sub get_circum {
        my ($r) = @_;

        return 2 * CONST_PI * $r;
    }

    1;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;在正常的情况下，常量的使用方法比较简单，但假如需求有些绕：&lt;/p&gt;

&lt;p&gt;在程序的开始时，我们需要检验用户的配置文件，确保每个条目用户都是有效的。&lt;/p&gt;

&lt;p&gt;比如说需求文件如下：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-config&quot;&gt;    dbName=github
    dbHost=localhost
    gitUser=LKI
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;显然地，一种简单但稍微蠢了点的方法是这么做：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-perl&quot;&gt;    sub validate_config_dumb {
        my ($conf) = @_;

        validate_parm($conf, PARM_DB_NAME);
        validate_parm($conf, PARM_DB_HOST);
        validate_parm($conf, PARM_GIT_USER);
    }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;这样做有几个问题：&lt;/p&gt;

&lt;p&gt;1.config parameter一多，代码就很长，丑&lt;br /&gt;
2.增加config constant时，不仅要改常量模块，这里也要加，累&lt;br /&gt;
3.这样的代码提交上去感觉好丢脸，蠢&lt;br /&gt;
4.以上三点在&lt;a href=&quot;http://coolshell.cn/articles/2058.html&quot;&gt;撞大运编程&lt;/a&gt;里都不是问题&lt;/p&gt;

&lt;p&gt;那怎么样做才算是优雅的做法呢？&lt;/p&gt;

&lt;h2 id=&quot;perlexport&quot;&gt;利用Perl的Export机制&lt;/h2&gt;

&lt;p&gt;在Exporter中，定义在%EXPORT_TAGS中的文件可以直接引用：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-perl&quot;&gt;    my $tags      = \$Lirian::Constants::EXPORT_TAGS;
    my $math_tags = $tags-&amp;gt;{math}; # [&#39;CONST_PI&#39;, &#39;CONST_E&#39;];
    my $parm_tags = $tags-&amp;gt;{parm}; # [&#39;PARM_DB_NAME&#39;, &#39;PARM_DB_HOST&#39;, &#39;PARM_GIT_USER&#39;];
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;这样就可以拿到常量的名字了，此时我们便需要&lt;a href=&quot;http://stackoverflow.com/questions/2187682/how-do-i-access-a-constant-in-perl-whose-name-is-contained-in-a-variable&quot;&gt;在Perl中根据变量名获取变量值&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-perl&quot;&gt;    my $name  = &#39;CONST_PI&#39;;
    my $value = Lirian::Constants-&amp;gt;$name; # 3.1416
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;所以在上一小节的问题中，我们可以得出一个更优雅的解决方案啦~&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-perl&quot;&gt;    sub validate_config {
        my ($conf) = @_;

        my $tags      = \$Lirian::Constants::EXPORT_TAGS;
        my $parm_tags = $tags-&amp;gt;{parm};
        foreach my $parm_name (@$parm_tags) {
            my $parm_value = Lirian::Constants-&amp;gt;$parm_name;
            validate_parm($conf, $parm_value);
        }
    }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;大功告成！从此以后在加常量的同时，validate_config会自动地检验新增的配置选项啦~&lt;/p&gt;

&lt;p&gt;此时便可以使用&lt;a href=&quot;http://whatthecommit.com/&quot;&gt;一个酷炫的Git Commit Message&lt;/a&gt;来提交工作啦！&lt;/p&gt;

</description>
        <pubDate>Sun, 26 Jul 2015 04:56:06 +0800</pubDate>
        <link>http://www.cloudisdream.com/how-to-set-perl-constant-module</link>
        <guid isPermaLink="true">http://www.cloudisdream.com/how-to-set-perl-constant-module</guid>
        
        
      </item>
    
      <item>
        <title>Vagrant-up遇到mount no device的解决方案</title>
        <description>&lt;p&gt;今天跑&lt;code&gt;vagrant up&lt;/code&gt;的时候遇到了这个问题：&lt;/p&gt;

&lt;!--MORE--&gt;

&lt;pre&gt;&lt;code&gt;==&amp;gt; cvc-tools: Machine booted and ready!
==&amp;gt; cvc-tools: Checking for guest additions in VM...
==&amp;gt; cvc-tools: Configuring and enabling network interfaces...
==&amp;gt; cvc-tools: Mounting shared folders...
    cvc-tools: /work =&amp;gt; D:/work/
Failed to mount folders in Linux guest. This is usually because
the &quot;vboxsf&quot; file system is not available. Please verify that
the guest additions are properly installed in the guest and
can work properly. The command attempted was:

mount -t vboxsf -o uid=`id -u devel`,gid=`getent group devel | cut -d:
-f3` work /work
mount -t vboxsf -o uid=`id -u devel`,gid=`id -g devel` work /work

The error output from the last command was:

/sbin/mount.vboxsf: mounting failed with the error: No such device
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;查看了 https://github.com/mitchellh/vagrant/issues/1657&lt;br /&gt;
以后，明白这是&lt;code&gt;yum update&lt;/code&gt;更新了内核，但是没有更新VirtualBox的连接的问题。&lt;/p&gt;

&lt;p&gt;于是重新添加一下VBox：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[lirian@localhost ~]$ sudo /etc/init.d/vboxadd setup
Removing existing VirtualBox non-DKMS kernel modules       [  OK  ]
Building the VirtualBox Guest Additions kernel modules
The headers for the current running kernel were not found. If the
following
module compilation fails then this could be the reason.
The missing package can be probably installed with
yum install kernel-devel-2.6.18-404.el5

Building the main Guest Additions module                   [FAILED]
(Look at /var/log/vboxadd-install.log to find out what went wrong)
Doing non-kernel setup of the Guest Additions              [  OK  ]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;根据以上信息，得知现在在跑的内核开发包缺失，于是再跑一下：&lt;/p&gt;

&lt;p&gt;&lt;code&gt;yum install kernel-devel-2.6.18-404.el5&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;之后再vagrant up或者手动mount就可以解决问题了。&lt;/p&gt;

&lt;p&gt;总结：vagrant up遇到mount error: no such device可以通过以下脚本解决：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;yum install kernel-devel-2.6.18-404.el5
/etc/init.d/vboxadd setup
mount -t vboxsf -o uid=`id -u devel`,gid=`id -g devel` work /work
&lt;/code&gt;&lt;/pre&gt;
</description>
        <pubDate>Fri, 15 May 2015 18:29:05 +0800</pubDate>
        <link>http://www.cloudisdream.com/vagrant-up-but-mount-no-device-zh</link>
        <guid isPermaLink="true">http://www.cloudisdream.com/vagrant-up-but-mount-no-device-zh</guid>
        
        
      </item>
    
      <item>
        <title>Solution for vagrant-up error: mount no device</title>
        <description>&lt;p&gt;Today I encounter a problem running &lt;code&gt;vagrant up&lt;/code&gt;：&lt;/p&gt;

&lt;!--MORE--&gt;

&lt;pre&gt;&lt;code&gt;==&amp;gt; cvc-tools: Machine booted and ready!
==&amp;gt; cvc-tools: Checking for guest additions in VM...
==&amp;gt; cvc-tools: Configuring and enabling network interfaces...
==&amp;gt; cvc-tools: Mounting shared folders...
    cvc-tools: /work =&amp;gt; D:/work/
Failed to mount folders in Linux guest. This is usually because
the &quot;vboxsf&quot; file system is not available. Please verify that
the guest additions are properly installed in the guest and
can work properly. The command attempted was:

mount -t vboxsf -o uid=`id -u devel`,gid=`getent group devel | cut -d:
-f3` work /work
mount -t vboxsf -o uid=`id -u devel`,gid=`id -g devel` work /work

The error output from the last command was:

/sbin/mount.vboxsf: mounting failed with the error: No such device
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Refer to https://github.com/mitchellh/vagrant/issues/1657&lt;/p&gt;

&lt;p&gt;_This is usually a result of the guest’s package manager upgrading the&lt;/p&gt;

&lt;p&gt;kernel without rebuilding the VirtualBox Guest Additions_ by lenciel. So&lt;br /&gt;
we run vboxadd accordingly:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    [lirian@localhost ~]$ sudo /etc/init.d/vboxadd setup
    Removing existing VirtualBox non-DKMS kernel modules       [  OK  ]
    Building the VirtualBox Guest Additions kernel modules
    The headers for the current running kernel were not found. If the
    following
    module compilation fails then this could be the reason.
    The missing package can be probably installed with
    yum install kernel-devel-2.6.18-404.el5

    Building the main Guest Additions module                   [FAILED]
    (Look at /var/log/vboxadd-install.log to find out what went wrong)
    Doing non-kernel setup of the Guest Additions              [  OK  ]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;From the message we can know current running kernel were not found. So&lt;br /&gt;
we run:&lt;code&gt;yum install kernel-devel-2.6.18-404.el5&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;After all, we can run &lt;code&gt;vagrant up&lt;/code&gt; or mount the directory manually.&lt;/p&gt;
</description>
        <pubDate>Fri, 15 May 2015 18:29:05 +0800</pubDate>
        <link>http://www.cloudisdream.com/vagrant-up-but-mount-no-device-en</link>
        <guid isPermaLink="true">http://www.cloudisdream.com/vagrant-up-but-mount-no-device-en</guid>
        
        
      </item>
    
      <item>
        <title>用Openpyxl做两个Excel文件的比对</title>
        <description>&lt;h2 id=&quot;section&quot;&gt;起因&lt;/h2&gt;

&lt;p&gt;最近老是要做比对Excel报表的工作，于是想写一个Python的小脚本来做这个工作。&lt;br /&gt;
关于Python的Excel处理，以前只用过xlrd库，处理的是Office03的.xls文件。&lt;br /&gt;
这次写小工具的同时也是学习一下新的东西。&lt;/p&gt;

&lt;!--MORE--&gt;

&lt;h2 id=&quot;section-1&quot;&gt;准备工作&lt;/h2&gt;

&lt;p&gt;由于本次要比对的报表是Office07的.xlsx文件，上网查了一下Python怎么做比较合适。&lt;br /&gt;
看了几篇心得以后，敲定用Openpyxl（参考如下链接：）&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;http://www.gocalf.com/blog/python-read-write-excel.html&quot;&gt;Python处理Excel的四个工具&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;于是接下来是装Openpyxl，到官网上按照流程装了一发：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;https://pythonhosted.org/openpyxl/&quot;&gt;A Python Library: Openpyxl&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;由于源码是到BitBucket上拖下来的，所以顺便还装了SourceTree。&lt;br /&gt;
据说SourceTree还有Git的相关功能，下次可以体验一下。&lt;/p&gt;

&lt;h2 id=&quot;openpyxl&quot;&gt;使用Openpyxl&lt;/h2&gt;

&lt;p&gt;Openpyxl装好以后直接import就能用啦：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;from openpyxl import *
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Openpyxl还提供了一个非常棒的教程~~（有点过于简单~~&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;https://pythonhosted.org/openpyxl/tutorial.html&quot;&gt;Openpyxl Tutorial&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Openpyxl还有个弊端就是文档不怎么详细，只能去翻源码。&lt;/p&gt;

&lt;h2 id=&quot;section-2&quot;&gt;最终代码&lt;/h2&gt;

&lt;p&gt;可以到我写的PythonScripts里找到我写的版本：&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/LKI/PythonScripts/tree/master/ExcelComparer&quot;&gt;PythonScripts - ExcelComparer&lt;/a&gt;&lt;/p&gt;

</description>
        <pubDate>Thu, 28 Aug 2014 18:31:08 +0800</pubDate>
        <link>http://www.cloudisdream.com/compare-excel-using-openpyxl/</link>
        <guid isPermaLink="true">http://www.cloudisdream.com/compare-excel-using-openpyxl/</guid>
        
        
      </item>
    
  </channel>
</rss>
